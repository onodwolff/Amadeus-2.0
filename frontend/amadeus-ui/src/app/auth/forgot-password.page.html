<div class="auth-page">
  <form class="auth-form" (ngSubmit)="submit()" *ngIf="!submitted(); else success">
    <h1 class="auth-form__title">Forgot your password?</h1>
    <p class="auth-form__description">
      Enter the e-mail address associated with your account and we'll send you a link to reset your password.
    </p>

    <div class="auth-form__alert" *ngIf="error()">{{ error() }}</div>

    <div class="auth-form__field">
      <label for="email">Email address</label>
      <input
        id="email"
        type="email"
        formControlName="email"
        autocomplete="email"
        [class.auth-form__input--invalid]="form.controls.email.invalid && form.controls.email.touched"
      />
      <p class="auth-form__hint" *ngIf="form.controls.email.invalid && form.controls.email.touched">
        Please enter a valid e-mail address.
      </p>
    </div>

    <button type="submit" class="auth-form__submit" [disabled]="isSubmitting()">
      <span *ngIf="!isSubmitting(); else loading">Send reset link</span>
    </button>
    <ng-template #loading><span>Sendingâ€¦</span></ng-template>

    <a routerLink="/login" class="auth-form__link">Return to sign in</a>
  </form>

  <ng-template #success>
    <div class="auth-form auth-form--success">
      <h1 class="auth-form__title">Check your inbox</h1>
      <p class="auth-form__description">
        If an account matches <strong>{{ form.controls.email.value }}</strong>, we'll send instructions to reset your
        password shortly.
      </p>
      <a routerLink="/login" class="auth-form__link">Back to sign in</a>
    </div>
  </ng-template>
</div>
